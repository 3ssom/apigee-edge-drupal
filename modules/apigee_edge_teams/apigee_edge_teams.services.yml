services:

  logger.channel.apigee_edge_teams:
    parent: logger.channel_base
    arguments: ['apigee_edge_teams']

  apigee_edge_teams.cache.memory_cache_factory:
    parent: apigee_edge.cache.memory_cache_factory
    arguments: [apigee_edge_teams]

  apigee_edge_teams.cache.company_membership_object:
    class: Drupal\apigee_edge_teams\CompanyMembershipObjectCache
    arguments: ['@cache_factory', '@apigee_edge.cache.memory_cache_factory', '@config.factory', '@datetime.time']

  apigee_edge_teams.controller.team:
    class: Drupal\apigee_edge_teams\Entity\Controller\TeamController
    arguments: [
      '@apigee_edge.sdk_connector',
      '@apigee_edge.controller.organization',
      '@apigee_edge_teams.controller.cache.team',
      '@apigee_edge_teams.controller.cache.team_ids',
      '@apigee_edge.entity.controller.cache.general_app_cache_by_owner_factory',
      '@apigee_edge.entity.controller.cache.app_name_by_owner_factory',
      '@apigee_edge_teams.cache.company_membership_object',
      '@apigee_edge.controller.cache.developer_companies',
    ]

  apigee_edge_teams.controller.team_app_controller_factory:
    class: Drupal\apigee_edge_teams\Entity\Controller\TeamAppControllerFactory
    arguments: ['@apigee_edge.sdk_connector', '@apigee_edge.controller.organization', '@apigee_edge.controller.cache.apps', '@apigee_edge.entity.controller.cache.general_app_cache_by_owner_factory', '@apigee_edge.entity.controller.cache.app_name_by_owner_factory']

  apigee_edge_teams.controller.team_app_credential_controller_factory:
    class: Drupal\apigee_edge_teams\Entity\Controller\TeamAppCredentialControllerFactory
    arguments: ['@apigee_edge.sdk_connector', '@apigee_edge.entity.controller.cache.general_app_cache_by_owner_factory', '@event_dispatcher']

  apigee_edge_teams.company_members_controller_factory:
    class: Drupal\apigee_edge_teams\CompanyMembersControllerFactory
    arguments: ['@apigee_edge.sdk_connector', '@apigee_edge_teams.cache.company_membership_object']

  apigee_edge_teams.controller.cache.team:
    class: Drupal\apigee_edge\Entity\Controller\Cache\EntityCache
    arguments: ['@apigee_edge_teams.cache.memory_cache_factory', '@apigee_edge_teams.controller.cache.team_ids', team]

  apigee_edge_teams.controller.cache.team_ids:
    parent: apigee_edge.controller.cache.entity_id_cache

  apigee_edge_teams.team_membership_manager:
    class: Drupal\apigee_edge_teams\TeamMembershipManager
    arguments: ['@entity_type.manager', '@apigee_edge_teams.company_members_controller_factory', '@apigee_edge.controller.cache.developer_companies']

  apigee_edge_teams.event_subscriber.team_app_field_config_list_alter_event_subscriber:
    class: Drupal\apigee_edge_teams\EventSubscriber\TeamAppFieldConfigListAlterEventSubscriber
    arguments: ['@form_builder']
    tags:
      - { name: event_subscriber }

  route.subscriber.apigee_edge_teams.team_app_by_name:
    class: Drupal\apigee_edge_teams\Routing\TeamAppByNameRouteAlterSubscriber
    tags:
      - { name: event_subscriber }

  paramconverter.team_app_name:
    class: Drupal\apigee_edge_teams\ParamConverter\TeamAppNameConverter
    arguments: ['@entity_type.manager', '@logger.channel.apigee_edge_teams']
    tags:
      - { name: paramconverter }
